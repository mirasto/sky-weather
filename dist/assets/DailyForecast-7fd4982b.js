import{c as T,u as A,A as W,a as k,s as F,r as h,B as P,j as t,H as z,L as E,m as g,C,w as R,D as O,d as p,q as Y,g as $,f as D,E as q,i as B,x as U,F as G,y as Q}from"./index-fe83a292.js";import{C as J}from"./calendar-62b514f8.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=T("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function tt(){const{t:c}=A(),f=W(),l=k(F),n=h.useRef(null),{data:s,isLoading:j,isError:u}=P(l),r=k(e=>e.weatherInteraction.selectedWeather),d=e=>{if(n.current){const o=e==="left"?-200:200;n.current.scrollBy({left:o,behavior:"smooth"})}},w=e=>{if(!s)return;const o={coord:{lat:s.city.coord.lat,lon:s.city.coord.lon},weather:e.weather,base:"stations",main:e.main,visibility:e.visibility,wind:e.wind,clouds:e.clouds,dt:e.dt,sys:{country:s.city.country,sunrise:s.city.sunrise,sunset:s.city.sunset},timezone:s.city.timezone,id:s.city.id,name:s.city.name,cod:200};f(q(o))};if(j)return t.jsx(z,{});if(u||!s)return null;const y=s.list.slice(0,E.HOURLY_FORECAST_DISPLAY),m=s.city.timezone;return t.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:t.jsxs(C,{className:"overflow-hidden",children:[t.jsx(R,{title:c("forecast.hourly"),icon:t.jsx(O,{className:"w-4 h-4"}),action:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>d("left"),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Scroll left",children:t.jsx(K,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>d("right"),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Scroll right",children:t.jsx(H,{className:"w-4 h-4"})})]})}),t.jsx("div",{ref:n,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 -mx-4 px-4",children:y.map((e,o)=>{var a,x;const b=o===0&&!r,v=(r==null?void 0:r.dt)===e.dt,i=b||v;return t.jsxs(g.div,{onClick:()=>w(e),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.03},className:p("flex-shrink-0 flex flex-col items-center gap-2 py-3 px-4 rounded-2xl cursor-pointer","transition-all duration-200",i?"bg-indigo-100 dark:bg-indigo-900/50 scale-105":"hover:bg-slate-100 dark:hover:bg-slate-700/50"),children:[t.jsx("span",{className:p("text-xs font-medium",i?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"),children:o===0?c("forecast.today"):Y(e.dt,m,{hour:"numeric"})}),t.jsx("img",{src:$(((a=e.weather[0])==null?void 0:a.icon)||"01d","2x"),alt:((x=e.weather[0])==null?void 0:x.description)||"Weather",className:"w-10 h-10"}),t.jsxs("span",{className:p("text-sm font-semibold",i?"text-indigo-700 dark:text-indigo-300":""),children:[D(e.main.temp,"metric",!1),"Â°"]}),e.pop>0&&t.jsxs("span",{className:"text-xs text-blue-500 flex items-center gap-0.5",children:["ðŸ’§ ",Math.round(e.pop*100),"%"]})]},e.dt)})})]})})}function et(){const{t:c,i18n:f}=A(),l=k(F),[n,s]=h.useState(null),[j,u]=h.useState(!0),[r,d]=h.useState(null);if(h.useEffect(()=>{(async()=>{u(!0),d(null);try{const a=await Q(l.lat,l.lng);s(a)}catch(a){d("Failed to load forecast"),console.error("Error fetching daily forecast:",a)}finally{u(!1)}})()},[l.lat,l.lng]),j)return t.jsx("div",{className:"space-y-2",children:[...Array(5)].map((i,a)=>t.jsx(B,{},a))});if(r||!n)return t.jsx(C,{className:"p-6 text-center",children:t.jsx("p",{className:"text-slate-500",children:r||"No forecast data"})});const w=n.daily.time.slice(0,E.DAILY_FORECAST_DISPLAY),y=[...n.daily.temperature_2m_min,...n.daily.temperature_2m_max],m=Math.min(...y),o=Math.max(...y)-m,b=i=>{const a=new Date().toISOString().split("T")[0];return i===a},v=i=>new Date(i).toLocaleDateString(f.language,{weekday:"short"});return t.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:t.jsxs(C,{children:[t.jsx(R,{title:c("forecast.daily"),icon:t.jsx(J,{className:"w-4 h-4"})}),t.jsx("div",{className:"space-y-1",children:w.map((i,a)=>{const x=n.daily.temperature_2m_min[a],S=n.daily.temperature_2m_max[a],_=n.daily.precipitation_probability_max[a],L=n.daily.weathercode[a],N=b(i),I=(x-m)/o*100,M=(S-m)/o*100-I;return t.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.05},className:p("flex items-center gap-2 sm:gap-3 py-3 px-3 rounded-xl","transition-all duration-200","hover:bg-slate-100 dark:hover:bg-slate-700/50","cursor-pointer group",N&&"bg-indigo-50 dark:bg-indigo-900/20"),children:[t.jsx("div",{className:"w-14 sm:w-16 flex-shrink-0",children:t.jsx("span",{className:p("text-sm font-medium",N?"text-indigo-600 dark:text-indigo-400":""),children:N?c("forecast.today"):v(i)})}),t.jsx("img",{src:`https://openweathermap.org/img/wn/${U(L)}@2x.png`,alt:G(L),className:"w-8 h-8 flex-shrink-0"}),t.jsx("div",{className:"w-12 flex-shrink-0 text-center",children:_>10&&t.jsxs("span",{className:"text-xs text-blue-500 font-medium",children:[_,"%"]})}),t.jsxs("span",{className:"w-12 sm:w-14 text-sm text-slate-400 text-right flex-shrink-0 max-[1274px]:hidden",children:[D(x,"metric",!1),"Â°"]}),t.jsx("div",{className:"flex-1 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full relative mx-2",children:t.jsx("div",{className:"absolute h-full rounded-full bg-gradient-to-r from-blue-400 via-indigo-500 to-orange-400",style:{left:`${I}%`,width:`${Math.max(M,10)}%`}})}),t.jsxs("span",{className:"w-12 sm:w-14 text-sm font-medium text-right flex-shrink-0 max-[1274px]:hidden",children:[D(S,"metric",!1),"Â°"]}),t.jsx(H,{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},i)})})]})})}export{et as D,tt as H};
