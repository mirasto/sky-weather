import{c as _,u as L,b as I,s as T,q as x,G as H,j as e,H as W,L as E,m as f,C as N,B as F,I as P,g as h,z as O,i as Y,h as v,o as z,D as U,J as $,E as q}from"./index-37de8fcc.js";import{C as B}from"./calendar-80ef8c39.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=_("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function V(){const{t:n}=L(),i=I(T),a=x.useRef(null),{data:l,isLoading:y,isError:p}=H(i),c=s=>{if(a.current){const r=s==="left"?-200:200;a.current.scrollBy({left:r,behavior:"smooth"})}};if(y)return e.jsx(W,{});if(p||!l)return null;const u=l.list.slice(0,E.HOURLY_FORECAST_DISPLAY),j=l.city.timezone;return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs(N,{className:"overflow-hidden",children:[e.jsx(F,{title:n("forecast.hourly"),icon:e.jsx(P,{className:"w-4 h-4"}),action:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>c("left"),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Scroll left",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c("right"),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Scroll right",children:e.jsx(R,{className:"w-4 h-4"})})]})}),e.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 -mx-4 px-4",children:u.map((s,r)=>{var m,g;const d=r===0;return e.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:h("flex-shrink-0 flex flex-col items-center gap-2 py-3 px-4 rounded-2xl","transition-all duration-200",d?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"),children:[e.jsx("span",{className:h("text-xs font-medium",d?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"),children:d?n("forecast.today"):O(s.dt,j,{hour:"numeric"})}),e.jsx("img",{src:Y(((m=s.weather[0])==null?void 0:m.icon)||"01d","2x"),alt:((g=s.weather[0])==null?void 0:g.description)||"Weather",className:"w-10 h-10"}),e.jsxs("span",{className:h("text-sm font-semibold",d?"text-indigo-700 dark:text-indigo-300":""),children:[v(s.main.temp,"metric",!1),"Â°"]}),s.pop>0&&e.jsxs("span",{className:"text-xs text-blue-500 flex items-center gap-0.5",children:["ðŸ’§ ",Math.round(s.pop*100),"%"]})]},s.dt)})})]})})}function X(){const{t:n}=L(),i=I(T),[a,l]=x.useState(null),[y,p]=x.useState(!0),[c,u]=x.useState(null);if(x.useEffect(()=>{(async()=>{p(!0),u(null);try{const t=await q(i.lat,i.lng);l(t)}catch(t){u("Failed to load forecast"),console.error("Error fetching daily forecast:",t)}finally{p(!1)}})()},[i.lat,i.lng]),y)return e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((o,t)=>e.jsx(z,{},t))});if(c||!a)return e.jsx(N,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-500",children:c||"No forecast data"})});const j=a.daily.time.slice(0,E.DAILY_FORECAST_DISPLAY),s=[...a.daily.temperature_2m_min,...a.daily.temperature_2m_max],r=Math.min(...s),m=Math.max(...s)-r,g=o=>{const t=new Date().toISOString().split("T")[0];return o===t},A=o=>new Date(o).toLocaleDateString("en-US",{weekday:"short"});return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(N,{children:[e.jsx(F,{title:n("forecast.daily"),icon:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("div",{className:"space-y-1",children:j.map((o,t)=>{const w=a.daily.temperature_2m_min[t],k=a.daily.temperature_2m_max[t],C=a.daily.precipitation_probability_max[t],D=a.daily.weathercode[t],b=g(o),S=(w-r)/m*100,M=(k-r)/m*100-S;return e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},className:h("flex items-center gap-3 py-3 px-3 rounded-xl","transition-all duration-200","hover:bg-slate-100 dark:hover:bg-slate-700/50","cursor-pointer group",b&&"bg-indigo-50 dark:bg-indigo-900/20"),children:[e.jsx("div",{className:"w-16 flex-shrink-0",children:e.jsx("span",{className:h("text-sm font-medium",b?"text-indigo-600 dark:text-indigo-400":""),children:b?n("forecast.today"):A(o)})}),e.jsx("img",{src:`https://openweathermap.org/img/wn/${U(D)}@2x.png`,alt:$(D),className:"w-8 h-8 flex-shrink-0"}),e.jsx("div",{className:"w-12 flex-shrink-0 text-center",children:C>10&&e.jsxs("span",{className:"text-xs text-blue-500 font-medium",children:[C,"%"]})}),e.jsxs("span",{className:"w-10 text-sm text-slate-400 text-right flex-shrink-0",children:[v(w,"metric",!1),"Â°"]}),e.jsx("div",{className:"flex-1 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full relative mx-2",children:e.jsx("div",{className:"absolute h-full rounded-full bg-gradient-to-r from-blue-400 via-indigo-500 to-orange-400",style:{left:`${S}%`,width:`${Math.max(M,10)}%`}})}),e.jsxs("span",{className:"w-10 text-sm font-medium text-right flex-shrink-0",children:[v(k,"metric",!1),"Â°"]}),e.jsx(R,{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},o)})})]})})}export{X as D,V as H};
